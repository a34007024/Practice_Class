C51 COMPILER V9.01   LED_FUNCTIONS                                                         09/13/2018 11:19:20 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE LED_FUNCTIONS
OBJECT MODULE PLACED IN led_functions.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE led_functions.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg51.h>
   2          #define led P1
   3          #define sw P0
   4          sbit buzzer = P3^7;
   5          sbit resetled = P2^0;
   6          void delay(int);
   7          void ledmoveleft();
   8          void ledmoveright();
   9          void ledflash();
  10          void beep(int);
  11          void delay100us(int);
  12          void main(){
  13   1              led = 0x00;
  14   1              buzzer = 1;//disable buzzer and switch所以送高態訊號
  15   1              delay(200);
  16   1              led = 0xfe;
  17   1              while(1){
  18   2                      if(resetled == 0)led = 0xfe;
  19   2                      //if(sw==0xfe)ledmoveleft();
  20   2                      //if(sw==0xfc)ledmoveright();
  21   2                      //if(sw==0xf8)ledflash();
  22   2                      ledmoveleft();
  23   2                      ledflash();
  24   2                      beep(1);
  25   2                      ledflash();
  26   2                      beep(1);
  27   2                      ledflash();
  28   2                      beep(1);
  29   2                      delay(100);
  30   2              }
  31   1      }
  32          void ledmoveleft(){
  33   1              int i; led = 0xfe;
  34   1              for(i = 0;i<8;i++){
  35   2                      delay(100);
  36   2                      led = led<<1 | 1;
  37   2              }
  38   1      }
  39          void ledmoveright(){
  40   1              int i; led = 0x7f;
  41   1              for(i = 0;i<8;i++){
  42   2                      delay(100);
  43   2                      led = led>>1 | 0x80;
  44   2              }
  45   1      }
  46          void ledflash(){
  47   1              //led =~ led;   // =~ 為將變數取反相
  48   1              led = 0xff;
  49   1              delay(300);
  50   1              led = 0x00;
  51   1              delay(300);
  52   1      }
  53          void beep(int beepcount){
  54   1              int i,j;
  55   1              for(i = 0;i < beepcount;i++){
C51 COMPILER V9.01   LED_FUNCTIONS                                                         09/13/2018 11:19:20 PAGE 2   

  56   2                      for(j = 0;j<200;j++){
  57   3                              buzzer = 0;delay100us(1);
  58   3                              buzzer = 1;delay100us(1);
  59   3                      }
  60   2                      delay(100);
  61   2              }
  62   1      }
  63          void delay(int delayXms){
  64   1              int i,j;
  65   1              for(i = 0;i < delayXms;i++)
  66   1                      for(j=0;j<120;j++);
  67   1      }
  68          void delay100us(int delayXms){
  69   1              int i,j;
  70   1              for(i = 0;i < delayXms;i++)
  71   1                      for(j=0;j<12;j++);
  72   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    310    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      10
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
